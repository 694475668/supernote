(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43160535"],{"161f":function(t,e,o){"use strict";o.r(e);var a,n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"changeblog"},[o("el-form",{ref:"addblog",attrs:{model:t.addblog,rules:t.addblog,"status-icon":!0,"hide-required-asterisk":""}},[o("div",{staticClass:"commont"},[o("el-form-item",{attrs:{label:"标题（CN）","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text",maxlength:"50"},model:{value:t.addblog.titleCn,callback:function(e){t.$set(t.addblog,"titleCn",e)},expression:"addblog.titleCn"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"标题（EN）","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text",maxlength:"50"},model:{value:t.addblog.titleEn,callback:function(e){t.$set(t.addblog,"titleEn",e)},expression:"addblog.titleEn"}})],1)],1),t._v(" "),o("div",{staticClass:"commont"},[o("el-form-item",{attrs:{label:"作者（CN）","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text",maxlength:"40"},model:{value:t.addblog.authorCn,callback:function(e){t.$set(t.addblog,"authorCn",e)},expression:"addblog.authorCn"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"作者（EN）","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text",maxlength:"40"},model:{value:t.addblog.authorEn,callback:function(e){t.$set(t.addblog,"authorEn",e)},expression:"addblog.authorEn"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"推荐标志","label-width":t.formLabelWidth}},[o("el-radio",{attrs:{label:"Y"},model:{value:t.addblog.recommendFlag,callback:function(e){t.$set(t.addblog,"recommendFlag",e)},expression:"addblog.recommendFlag"}},[t._v("推荐")]),t._v(" "),o("el-radio",{attrs:{label:"N"},model:{value:t.addblog.recommendFlag,callback:function(e){t.$set(t.addblog,"recommendFlag",e)},expression:"addblog.recommendFlag"}},[t._v("不推荐")])],1),t._v(" "),o("div",{staticClass:"commont"},[o("el-form-item",{attrs:{label:"pc图片","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"before-upload":t.beforeUploadPicture1}},[t.imageUrl1?o("img",{staticClass:"avatar",attrs:{src:t.imageUrl1}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),o("el-form-item",{attrs:{label:"移动端图片","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"before-upload":t.beforeUploadPicture2}},[t.imageUrl2?o("img",{staticClass:"avatar",attrs:{src:t.imageUrl2}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),o("div",{staticClass:"commont"},[o("el-form-item",{attrs:{label:"SEO关键字（CN）","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text",maxlength:"255"},model:{value:t.addblog.seoKeywordCn,callback:function(e){t.$set(t.addblog,"seoKeywordCn",e)},expression:"addblog.seoKeywordCn"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"SEO关键字（EN）","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text",maxlength:"255"},model:{value:t.addblog.seoKeywordEn,callback:function(e){t.$set(t.addblog,"seoKeywordEn",e)},expression:"addblog.seoKeywordEn"}})],1)],1),t._v(" "),o("div",{staticClass:"commont"},[o("el-form-item",{attrs:{label:"SEO描述（CN）","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text",maxlength:"255"},model:{value:t.addblog.seoDescriptionCn,callback:function(e){t.$set(t.addblog,"seoDescriptionCn",e)},expression:"addblog.seoDescriptionCn"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"SEO描述（EN）","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text",maxlength:"255"},model:{value:t.addblog.seoDescriptionEn,callback:function(e){t.$set(t.addblog,"seoDescriptionEn",e)},expression:"addblog.seoDescriptionEn"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"浏览数","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text"},model:{value:t.addblog.viewCount,callback:function(e){t.$set(t.addblog,"viewCount",e)},expression:"addblog.viewCount"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"评论数","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text"},model:{value:t.addblog.commentsCount,callback:function(e){t.$set(t.addblog,"commentsCount",e)},expression:"addblog.commentsCount"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"点赞数","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",type:"text"},model:{value:t.addblog.thumbsCount,callback:function(e){t.$set(t.addblog,"thumbsCount",e)},expression:"addblog.thumbsCount"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"博客内容（CN）","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"none"},attrs:{action:"","http-request":t.to_upload_img,"show-file-list":!1}},[t._v("\n        >\n        "),o("i",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{id:"imgInput"}})]),t._v(" "),o("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption,"show-word-limit":""},on:{blur:function(e){return t.onEditorBlur1(e)},focus:function(e){return t.onEditorFocus1(e)},change:function(e){return t.onEditorChange1(e)}},model:{value:t.addblog.contentCn,callback:function(e){t.$set(t.addblog,"contentCn",e)},expression:"addblog.contentCn"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"博客内容（EN）","label-width":t.formLabelWidth}},[o("quill-editor",{ref:"myQuillEditor1",attrs:{options:t.editorOption,"show-word-limit":""},on:{blur:function(e){return t.onEditorBlur1(e)},focus:function(e){return t.onEditorFocus1(e)},change:function(e){return t.onEditorChange1(e)}},model:{value:t.addblog.contentEn,callback:function(e){t.$set(t.addblog,"contentEn",e)},expression:"addblog.contentEn"}})],1)],1),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("div",{staticClass:"put",staticStyle:{}},[o("el-button",{attrs:{type:"success",round:""},on:{click:t.back}},[t._v("返回")]),t._v(" "),o("el-button",{attrs:{type:"primary",round:""},on:{click:t.save}},[t._v("提交")])],1)],1)},l=[],i=o("bd86"),r=o("9339"),d=(o("a753"),o("8096"),o("14e1"),o("864d")),s={data:function(){var t;return t={imageUrl2:"",imageUrl1:"",addRange:[],addRange1:[],Rangeflag:!1,Rangeflag1:!1,formLabelWidth:"200px",editorOption:{placeholder:"请输入文本信息..."},addblog:{id:"",seq:"",authorCn:"",authorEn:"",titleCn:"",titleEn:"",contentCn:"",contentEn:"",urlPc:"",urlMobile:"",seoKeywordCn:"",seoKeywordEn:"",seoDescriptionCn:"",seoDescriptionEn:"",line:"1",viewCount:"",commentsCount:"",thumbsCount:"",recommendFlag:"N"},value:""},Object(i["a"])(t,"formLabelWidth","200px"),Object(i["a"])(t,"editorOption",{}),t},created:function(){this.getParams()},methods:(a={onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorChange:function(t){},onEditorBlur1:function(t){},onEditorFocus1:function(t){},onEditorChange1:function(t){},getParams:function(){var t=this;this.addblog.id=this.$route.query.id,Object(d["d"])(this.addblog.id).then(function(e){t.addblog.titleCn=e.titleCn,t.addblog.titleEn=e.titleEn,t.addblog.recommendFlag=e.recommendFlag,t.addblog.authorEn=e.authorEn,t.addblog.authorCn=e.authorCn,t.imageUrl1=e.urlPc,t.imageUrl2=e.urlMobile,t.addblog.seoKeywordCn=e.seoKeywordCn,t.addblog.seoKeywordEn=e.seoKeywordEn,t.addblog.seoDescriptionCn=e.seoDescriptionCn,t.addblog.seoDescriptionEn=e.seoDescriptionEn,t.addblog.viewCount=e.viewCount,t.addblog.commentsCount=e.commentsCount,t.addblog.thumbsCount=e.thumbsCount,t.addblog.contentEn=e.contentEn,t.addblog.contentCn=e.contentCn})},imgHandler:function(t){if(this.addRange=this.$refs.myQuillEditor.quill.getSelection(),""!=this.addRange&&null!=this.addRange&&(this.Rangeflag=!0),this.addRange1=this.$refs.myQuillEditor1.quill.getSelection(),""!=this.addRange1&&null!=this.addRange1&&(this.Rangeflag1=!0),t){var e=document.getElementById("imgInput");e.click()}},to_upload_img:function(t){var e=this;return new Promise(function(o,a){var n=new FormData;n.append("file",t.file),Object(d["j"])(n).then(function(t){e.Rangeflag&&(e.addRange=e.$refs.myQuillEditor.quill.getSelection(),e.$refs.myQuillEditor.quill.insertEmbed(null!==e.addRange?e.addRange.index:0,"image",t.voT.downloadUrl,r["sources"].USER),e.Rangeflag=!1),e.Rangeflag1&&(e.addRange1=e.$refs.myQuillEditor1.quill.getSelection(),e.$refs.myQuillEditor1.quill.insertEmbed(null!==e.addRange1?e.addRange1.index:0,"image",t.voT.downloadUrl,r["sources"].USER),e.Rangeflag1=!1)})})},beforeUploadPicture2:function(t){var e=this;if("image/png"===t.type||"image/gif"===t.type||"image/jpg"===t.type||"image/jpeg"===t.type){var o=t.size/1024/1024/2;if(!(o>2)){var a=new FormData;return a.append("file",t),Object(d["j"])(a).then(function(t){e.imageUrl2=t.voT.downloadUrl}),!1}this.$notify.warning({title:"警告",message:"图片大小必须小于2M"})}else this.$notify.warning({title:"警告",message:"请上传格式为image/png, image/gif, image/jpg, image/jpeg的图片"})},beforeUploadPicture1:function(t){var e=this;if("image/png"===t.type||"image/gif"===t.type||"image/jpg"===t.type||"image/jpeg"===t.type){var o=t.size/1024/1024/2;if(!(o>2)){var a=new FormData;return a.append("file",t),Object(d["j"])(a).then(function(t){e.imageUrl1=t.voT.downloadUrl}),!1}this.$notify.warning({title:"警告",message:"图片大小必须小于2M"})}else this.$notify.warning({title:"警告",message:"请上传格式为image/png, image/gif, image/jpg, image/jpeg的图片"})},back:function(){this.$router.push({path:"blogList"})},msgTip:function(t,e){this.$message({type:t,message:e,center:!0})},save:function(){var t=this;this.addblog.urlPc=this.imageUrl1,this.addblog.urlMobile=this.imageUrl2,""!=this.addblog.titleCn&&""!=this.addblog.titleEn?""!=this.addblog.authorCn&&""!=this.addblog.authorEn?""!=this.imageUrl1?""!=this.imageUrl2?Object(d["f"])(this.addblog).then(function(e){e.success?(t.msgTip("success","操作成功"),t.$router.push({path:"blogList"})):t.$message({type:"warning",message:e.errorMsg,center:!0})}):this.msgTip("warning","必须上传手机端图片"):this.msgTip("warning","必须上传PC端图片"):this.msgTip("warning","作者不能为空"):this.msgTip("warning","标题不能为空")}},Object(i["a"])(a,"onEditorBlur",function(t){}),Object(i["a"])(a,"onEditorFocus",function(t){}),Object(i["a"])(a,"onEditorChange",function(t){}),Object(i["a"])(a,"onEditorBlur1",function(t){}),Object(i["a"])(a,"onEditorFocus1",function(t){}),Object(i["a"])(a,"onEditorChange1",function(t){}),a),mounted:function(){this.$refs.myQuillEditor.quill.getModule("toolbar").addHandler("image",this.imgHandler),this.$refs.myQuillEditor1.quill.getModule("toolbar").addHandler("image",this.imgHandler)},watch:{$route:"getParams"}},c=s,u=(o("a7f6"),o("2877")),g=Object(u["a"])(c,n,l,!1,null,"1fe73cc6",null);e["default"]=g.exports},7572:function(t,e,o){},"864d":function(t,e,o){"use strict";o.d(e,"e",function(){return n}),o.d(e,"j",function(){return l}),o.d(e,"a",function(){return i}),o.d(e,"f",function(){return r}),o.d(e,"d",function(){return d}),o.d(e,"g",function(){return s}),o.d(e,"i",function(){return c}),o.d(e,"c",function(){return u}),o.d(e,"h",function(){return g}),o.d(e,"b",function(){return m});var a=o("b775");function n(t){return Object(a["a"])({url:"cms/manage/blog/query",method:"post",headers:{"x-access-token":window.localStorage.getItem("token")},data:t})}function l(t){return Object(a["a"])({url:"cms/picture/upload",method:"post",headers:{"x-access-token":window.localStorage.getItem("token")},data:t})}function i(t){return Object(a["a"])({url:"cms/manage/blog",method:"post",headers:{"x-access-token":window.localStorage.getItem("token")},data:t})}function r(t){return Object(a["a"])({url:"cms/manage/blog",method:"put",headers:{"x-access-token":window.localStorage.getItem("token")},data:t})}function d(t){return Object(a["a"])({url:"cms/manage/blog/"+t,method:"get",headers:{"x-access-token":window.localStorage.getItem("token")}})}function s(t,e){return Object(a["a"])({url:"cms/manage/blog/"+e,method:"put",headers:{"x-access-token":window.localStorage.getItem("token")},data:t})}function c(t,e){return Object(a["a"])({url:"cms/manage/blog/seq/"+e,method:"put",headers:{"x-access-token":window.localStorage.getItem("token")},data:t})}function u(t){return Object(a["a"])({url:"cms/manage/blog/"+t,method:"delete",headers:{"x-access-token":window.localStorage.getItem("token")}})}function g(t){return Object(a["a"])({url:"cms/manage/blog/recommend",method:"put",headers:{"x-access-token":window.localStorage.getItem("token")},data:t})}function m(t,e,o,a,n){return t.map(function(t){t.id==e&&(null!=n&&""!=n&&(t.updateUser=n),null!=a&&""!=a&&(t.updateTime=a),null!=o&&""!=o&&(t.line=o))}),t}},a7f6:function(t,e,o){"use strict";var a=o("7572"),n=o.n(a);n.a}}]);